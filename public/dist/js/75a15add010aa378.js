"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[903],{3903:(e,t,o)=>{o.r(t),o.d(t,{default:()=>m});var r=o(821),n={key:0};var a=o(5714),l=o(3907),u=o(7565);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function i(e,t,o){return(t=function(e){var t=function(e,t){if("object"!==s(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===s(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const d={layout:"MainLayout",middleware:["auth"],data:function(){return{form:new a.l0(i({username:null,email:null,first_name:null,last_name:null,phone:null,role:null,is_active:!0,gender:!0},"is_active",!0)),passwordForm:new a.l0({password:null,password_confirmation:null}),rolesList:[],gendersList:[{label:"Homme",id:1},{label:"Femme",id:2}],showIsActiveSwitch:(0,u.nu)(["admin"])}},computed:(0,l.Se)({user:"users/current",roles:"roles/all"}),created:function(){this.initData()},methods:{initData:function(){var e=this;this.$store.dispatch("settings/updatePageLoading",!0),this.$store.dispatch("roles/fetchAll").then((function(){e.rolesList=e.roles.all,e.$store.dispatch("users/fetch",e.$route.params.user).then((function(){e.form.fill(e.user.current),e.form.role=e.user.current.role_id,e.$store.dispatch("settings/updatePageLoading",!1)}))}))},updateInfos:function(){var e=this;this.$swal.confirm_update().then((function(t){t.isConfirmed&&e.form.put("users/info/"+e.user.current.id).then((function(t){t.data.status?(e.$swal.toast_success(t.data.message),e.$router.push({name:"users-index"})):e.$swal.alert_error(t.data.message)})).catch((function(e){console.log(e)}))}))},updatePassword:function(){var e=this;this.$swal.confirm_update().then((function(t){t.isConfirmed&&e.passwordForm.put("users/password/"+e.user.current.id).then((function(t){t.data.status?(e.$swal.toast_success(t.data.message),e.passwordForm.reset(),e.$router.push({name:"users-index"})):e.$swal.alert_error(t.data.message)})).catch((function(e){console.log(e)}))}))}}};const m=(0,o(3744).Z)(d,[["render",function(e,t,o,a,l,u){var s=(0,r.resolveComponent)("NLInput"),i=(0,r.resolveComponent)("NLColumn"),d=(0,r.resolveComponent)("NLSelect"),m=(0,r.resolveComponent)("NLSwitch"),f=(0,r.resolveComponent)("NLButton"),c=(0,r.resolveComponent)("NLFlex"),p=(0,r.resolveComponent)("NLForm"),h=(0,r.resolveComponent)("NLGrid"),V=(0,r.resolveComponent)("ContentBody");return e.can("edit_user")?((0,r.openBlock)(),(0,r.createElementBlock)("div",n,[(0,r.createVNode)(V,null,{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(h,{class:"my-4"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(i,null,{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(p,{action:u.updateInfos,form:l.form},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(i,{lg:"6",md:"6"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(s,{modelValue:l.form.first_name,"onUpdate:modelValue":t[0]||(t[0]=function(e){return l.form.first_name=e}),form:l.form,name:"firstname",label:"Prénom"},null,8,["modelValue","form"])]})),_:1}),(0,r.createVNode)(i,{lg:"6",md:"6"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(s,{modelValue:l.form.last_name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return l.form.last_name=e}),form:l.form,name:"last_name",label:"Nom de famille"},null,8,["modelValue","form"])]})),_:1}),(0,r.createVNode)(i,{lg:"6",md:"6"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(s,{modelValue:l.form.username,"onUpdate:modelValue":t[2]||(t[2]=function(e){return l.form.username=e}),form:l.form,name:"username",label:"Nom d'utilisateur","label-required":""},null,8,["modelValue","form"])]})),_:1}),(0,r.createVNode)(i,{lg:"6",md:"6"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(s,{modelValue:l.form.email,"onUpdate:modelValue":t[3]||(t[3]=function(e){return l.form.email=e}),form:l.form,name:"email",label:"Adresse e-mail",type:"email","label-required":""},null,8,["modelValue","form"])]})),_:1}),(0,r.createVNode)(i,{lg:"6",md:"6"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(s,{modelValue:l.form.phone,"onUpdate:modelValue":t[4]||(t[4]=function(e){return l.form.phone=e}),form:l.form,name:"phone",label:"N° de téléphone",type:"phone"},null,8,["modelValue","form"])]})),_:1}),(0,r.createVNode)(i,{lg:"6",md:"6"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(d,{modelValue:l.form.role,"onUpdate:modelValue":t[5]||(t[5]=function(e){return l.form.role=e}),form:l.form,name:"role",label:"Rôle",placeholder:"Choisissez un rôle",options:l.rolesList,labelRequired:""},null,8,["modelValue","form","options"])]})),_:1}),(0,r.createVNode)(i,{lg:"6",md:"6"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(d,{modelValue:l.form.gender,"onUpdate:modelValue":t[6]||(t[6]=function(e){return l.form.gender=e}),form:l.form,name:"gender",label:"Genre",placeholder:"Choisissez un genre",options:l.gendersList,labelRequired:""},null,8,["modelValue","form","options"])]})),_:1}),l.showIsActiveSwitch?((0,r.openBlock)(),(0,r.createBlock)(i,{key:0},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(m,{modelValue:l.form.is_active,"onUpdate:modelValue":t[7]||(t[7]=function(e){return l.form.is_active=e}),name:"is_active",form:l.form,label:"Le compte est activé ?",type:"is-success"},null,8,["modelValue","form"])]})),_:1})):(0,r.createCommentVNode)("",!0),(0,r.createVNode)(i,null,{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(c,{lgJustifyContent:"end"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(f,{loading:l.form.busy,label:"Mettre à jour"},null,8,["loading"])]})),_:1})]})),_:1})]})),_:1},8,["action","form"])]})),_:1}),(0,r.createVNode)(i,null,{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(p,{action:u.updatePassword,form:l.form},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(i,{lg:"4",md:"4"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(s,{modelValue:l.passwordForm.password,"onUpdate:modelValue":t[8]||(t[8]=function(e){return l.passwordForm.password=e}),form:l.passwordForm,label:"Mot de passe",name:"password",type:"password","label-required":""},null,8,["modelValue","form"])]})),_:1}),(0,r.createVNode)(i,{lg:"4",md:"4"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(s,{modelValue:l.passwordForm.password_confirmation,"onUpdate:modelValue":t[9]||(t[9]=function(e){return l.passwordForm.password_confirmation=e}),form:l.passwordForm,label:"Confirmation mot de passe",name:"password_confirmation",type:"password","label-required":""},null,8,["modelValue","form"])]})),_:1}),(0,r.createVNode)(i,null,{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(c,{lgJustifyContent:"end"},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(f,{loading:l.passwordForm.busy,label:"Mettre à jour"},null,8,["loading"])]})),_:1})]})),_:1})]})),_:1},8,["action","form"])]})),_:1})]})),_:1})]})),_:1})])):(0,r.createCommentVNode)("",!0)}]])}}]);
//# sourceMappingURL=75a15add010aa378.js.map