"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[759],{4759:(e,t,r)=>{r.r(t),r.d(t,{default:()=>m});var n=r(821),o={key:0};var a=r(5714),l=r(3907),i=r(7565);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===u(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const f={layout:"MainLayout",middleware:["auth"],data:function(){return{form:new a.l0({title:null,content:null,priority:1,deadline:null,assigned_to_id:null}),usersList:[]}},computed:c(c({},(0,l.Se)({users:"users/all",task:"tasks/current"})),{},{priorities:function(){return[{id:1,label:"Normal"},{id:2,label:"Moyenne"},{id:3,label:"Urgente"}]},canAssignTask:function(){return(0,i.nu)(["manager","admin"])}}),created:function(){var e=this;this.$store.dispatch("settings/updatePageLoading",!0),this.$store.dispatch("tasks/fetch",this.$route.params.task).then((function(){e.canAssignTask&&e.$store.dispatch("users/fetchAll").then((function(){e.usersList=e.users.all})),e.form.title=e.task.current.title,e.form.content=e.task.current.content,e.form.priority=e.task.current.priority,e.form.deadline=e.task.current.deadline,e.form.assigned_to_id=e.task.current.assigned_to_id,e.$store.dispatch("settings/updatePageLoading",!1)}))},methods:{update:function(){var e=this;this.form.put("tasks/"+this.task.current.id).then((function(t){t.data.status?e.$swal.toast_success(t.data.message):e.$swal.alert_error(t.data.message),console.log(t.data.additional)})).catch((function(t){e.$swal.catchError(t)}))}}};const m=(0,r(3744).Z)(f,[["render",function(e,t,r,a,l,i){var u=(0,n.resolveComponent)("ContentHeader"),s=(0,n.resolveComponent)("NLInput"),c=(0,n.resolveComponent)("NLColumn"),d=(0,n.resolveComponent)("NLSelect"),f=(0,n.resolveComponent)("NLWysiwyg"),m=(0,n.resolveComponent)("NLButton"),p=(0,n.resolveComponent)("NLFlex"),y=(0,n.resolveComponent)("NLForm"),b=(0,n.resolveComponent)("ContentBody");return e.can("create_task")?((0,n.openBlock)(),(0,n.createElementBlock)("div",o,[(0,n.createVNode)(u,{title:"Ajouter une nouvelle tâche"}),(0,n.createVNode)(b,null,{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(y,{action:i.update,form:l.form},{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(c,{lg:"6",md:"6"},{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(s,{modelValue:l.form.title,"onUpdate:modelValue":t[0]||(t[0]=function(e){return l.form.title=e}),form:l.form,name:"title",label:"Titre","label-required":"",length:255},null,8,["modelValue","form"])]})),_:1}),(0,n.createVNode)(c,{lg:"6",md:"6"},{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(d,{modelValue:l.form.priority,"onUpdate:modelValue":t[1]||(t[1]=function(e){return l.form.priority=e}),options:i.priorities,form:l.form,name:"priority",label:"Prioritée","label-required":""},null,8,["modelValue","options","form"])]})),_:1}),(0,n.createVNode)(c,null,{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(f,{modelValue:l.form.content,"onUpdate:modelValue":t[2]||(t[2]=function(e){return l.form.content=e}),form:l.form,name:"content",label:"Contenu",length:1e3},null,8,["modelValue","form"])]})),_:1}),i.canAssignTask?((0,n.openBlock)(),(0,n.createBlock)(c,{key:0,lg:"6",md:"6"},{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(d,{modelValue:l.form.assigned_to_id,"onUpdate:modelValue":t[3]||(t[3]=function(e){return l.form.assigned_to_id=e}),options:l.usersList,form:l.form,name:"assigned_to_id",label:"Assigné à"},null,8,["modelValue","options","form"])]})),_:1})):(0,n.createCommentVNode)("",!0),(0,n.createVNode)(c,{lg:"6",md:"6"},{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(s,{type:"date",modelValue:l.form.deadline,"onUpdate:modelValue":t[4]||(t[4]=function(e){return l.form.deadline=e}),form:l.form,name:"deadline",label:"Date fin"},null,8,["modelValue","form"])]})),_:1}),(0,n.createVNode)(c,null,{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(p,{lgJustifyContent:"end"},{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(m,{loading:l.form.busy,label:"Mettre à jour"},null,8,["loading"])]})),_:1})]})),_:1})]})),_:1},8,["action","form"])]})),_:1})])):(0,n.createCommentVNode)("",!0)}]])}}]);
//# sourceMappingURL=28643fe12b9800c1.js.map