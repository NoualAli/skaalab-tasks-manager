"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[157],{3157:(e,t,o)=>{o.r(t),o.d(t,{default:()=>m});var n=o(821),r={key:0};var l=o(5714),a=o(3907),i=o(7565);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function s(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function c(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?s(Object(o),!0).forEach((function(t){d(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function d(e,t,o){return(t=function(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===u(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const f={layout:"MainLayout",middleware:["auth"],data:function(){return{form:new l.l0({title:null,content:null,priority:1,deadline:null,assigned_to_id:null}),usersList:[]}},computed:c(c({},(0,a.Se)({users:"users/all"})),{},{priorities:function(){return[{id:1,label:"Normal"},{id:2,label:"Moyenne"},{id:3,label:"Urgente"}]},canAssignTask:function(){return(0,i.nu)(["manager","admin"])}}),created:function(){var e=this;this.$store.dispatch("settings/updatePageLoading",!0),this.canAssignTask?this.$store.dispatch("users/fetchAll").then((function(){e.usersList=e.users.all,e.$store.dispatch("settings/updatePageLoading",!1)})):this.$store.dispatch("settings/updatePageLoading",!1)},methods:{create:function(){var e=this;this.form.post("tasks").then((function(t){t.data.status?(e.$swal.toast_success(t.data.message),e.form.reset()):e.$swal.alert_error(t.data.message)})).catch((function(t){e.$swal.catchError(t)}))}}};const m=(0,o(3744).Z)(f,[["render",function(e,t,o,l,a,i){var u=(0,n.resolveComponent)("ContentHeader"),s=(0,n.resolveComponent)("NLInput"),c=(0,n.resolveComponent)("NLColumn"),d=(0,n.resolveComponent)("NLSelect"),f=(0,n.resolveComponent)("NLWysiwyg"),m=(0,n.resolveComponent)("NLButton"),p=(0,n.resolveComponent)("NLFlex"),b=(0,n.resolveComponent)("NLForm"),g=(0,n.resolveComponent)("ContentBody");return e.can("create_task")?((0,n.openBlock)(),(0,n.createElementBlock)("div",r,[(0,n.createVNode)(u,{title:"Ajouter une nouvelle tâche"}),(0,n.createVNode)(g,null,{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(b,{action:i.create,form:a.form},{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(c,{lg:"6",md:"6"},{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(s,{modelValue:a.form.title,"onUpdate:modelValue":t[0]||(t[0]=function(e){return a.form.title=e}),form:a.form,name:"title",label:"Titre","label-required":"",length:"255"},null,8,["modelValue","form"])]})),_:1}),(0,n.createVNode)(c,{lg:"6",md:"6"},{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(d,{modelValue:a.form.priority,"onUpdate:modelValue":t[1]||(t[1]=function(e){return a.form.priority=e}),options:i.priorities,form:a.form,name:"priority",label:"Prioritée","label-required":""},null,8,["modelValue","options","form"])]})),_:1}),(0,n.createVNode)(c,null,{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(f,{modelValue:a.form.content,"onUpdate:modelValue":t[2]||(t[2]=function(e){return a.form.content=e}),form:a.form,name:"content",label:"Contenu",length:"1000"},null,8,["modelValue","form"])]})),_:1}),i.canAssignTask?((0,n.openBlock)(),(0,n.createBlock)(c,{key:0,lg:"6",md:"6"},{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(d,{modelValue:a.form.assigned_to_id,"onUpdate:modelValue":t[3]||(t[3]=function(e){return a.form.assigned_to_id=e}),options:a.usersList,form:a.form,name:"assigned_to_id",label:"Assigné à"},null,8,["modelValue","options","form"])]})),_:1})):(0,n.createCommentVNode)("",!0),(0,n.createVNode)(c,{lg:"6",md:"6"},{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(s,{type:"date",modelValue:a.form.deadline,"onUpdate:modelValue":t[4]||(t[4]=function(e){return a.form.deadline=e}),form:a.form,name:"deadline",label:"Date fin"},null,8,["modelValue","form"])]})),_:1}),(0,n.createVNode)(c,null,{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(p,{lgJustifyContent:"end"},{default:(0,n.withCtx)((function(){return[(0,n.createVNode)(m,{loading:a.form.busy,label:"Ajouter"},null,8,["loading"])]})),_:1})]})),_:1})]})),_:1},8,["action","form"])]})),_:1})])):(0,n.createCommentVNode)("",!0)}]])}}]);
//# sourceMappingURL=962fb7cda9c36767.js.map