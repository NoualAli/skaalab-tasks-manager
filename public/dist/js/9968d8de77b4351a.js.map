{"version":3,"file":"dist/js/9968d8de77b4351a.js","mappings":"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","sources":["webpack:///./resources/js/pages/admin/files/index.vue","webpack:///./resources/js/pages/admin/files/index.vue?a8f0"],"sourcesContent":["<template>\n    <div>\n        <ContentHeader>\n            <template #actions>\n\n            </template>\n        </ContentHeader>\n        <ContentBody>\n            <NLDatatable :columns=\"columns\" :details=\"details\" :actions=\"actions\" :filters=\"filters\" title=\"Fichiers\"\n                urlPrefix=\"media\" @detailsChanged=\"show\"\n                @dataLoaded=\"() => this.$store.dispatch('settings/updatePageLoading', false)\" :refresh=\"refresh\" />\n        </ContentBody>\n    </div>\n</template>\n\n<script>\nimport { hasRole } from '../../../plugins/user';\n\nexport default {\n    layout: 'MainLayout',\n    middleware: [ 'auth', 'admin' ],\n    metaInfo() {\n        return { title: 'Fichiers' }\n    },\n    data() {\n        return {\n            refresh: 0,\n            columns: [\n                {\n                    label: 'Nom',\n                    field: 'original_name',\n                    isHtml: true,\n                    sortable: true,\n                    methods: {\n                        showField(e) {\n                            if ([ 'jpg', 'jpeg', 'png', 'svg', 'tif', 'pdf' ].includes(e.extension)) {\n                                return `<a target=\"_blank\" href=\"${e.storage_link}\">\n                                    <i class=\"${e.icon} icon\"></i>\n                                    ${e.original_name}\n                                    </a>`\n                            } else {\n                                return `<a target=\"_blank\" href=\"${e.storage_link}\" download=\"${e.original_name}\">\n                                    <i class=\"${e.icon} icon\"></i>\n                                    ${e.original_name}\n                                    </a>`\n                            }\n                        }\n                    }\n                },\n                {\n                    label: 'Taille',\n                    field: 'size_str',\n                    sortable: 'size',\n                },\n                {\n                    label: 'Propriétaire',\n                    field: 'full_name',\n                },\n                {\n                    label: 'Type',\n                    field: 'type',\n                },\n                {\n                    label: 'Date téléversement',\n                    field: 'created_at_formatted',\n                    sortable: 'created_at',\n                }\n            ],\n            actions: {\n                delete: {\n                    show: (item) => {\n                        return hasRole('root')\n                    },\n                    apply: this.destroy\n                }\n            },\n            filters: {\n                users: {\n                    label: 'Utilisateurs',\n                    cols: 3,\n                    multiple: true,\n                    data: null,\n                    value: null\n                },\n                types: {\n                    label: 'Types',\n                    cols: 3,\n                    multiple: true,\n                    data: null,\n                    value: null\n                },\n            },\n            details: [\n                {\n                    label: 'Nom',\n                    field: 'original_name',\n                    cols: {\n                        lg: 3,\n                    },\n                    isHtml: true,\n                    methods: {\n                        showField(e) {\n                            if ([ 'jpg', 'jpeg', 'png', 'svg', 'tif', 'pdf' ].includes(e.extension)) {\n                                return `<a target=\"_blank\" href=\"${e.storage_link}\">\n                                    <i class=\"${e.icon} icon\"></i>\n                                    ${e.original_name}\n                                    </a>`\n                            } else {\n                                return `<a target=\"_blank\" href=\"${e.storage_link}\" download=\"${e.original_name}\">\n                                    <i class=\"${e.icon} icon\"></i>\n                                    ${e.original_name}\n                                    </a>`\n                            }\n                        }\n                    }\n                },\n                {\n                    label: 'Taille',\n                    field: 'size_str',\n                    cols: {\n                        lg: 3,\n                    }\n                },\n                {\n                    label: 'Propriétaire',\n                    field: 'full_name',\n                    cols: {\n                        lg: 3,\n                    }\n                },\n                {\n                    label: 'Type',\n                    field: 'type',\n                    cols: {\n                        lg: 3,\n                    }\n                },\n                {\n                    label: 'Mimetype',\n                    field: 'mimetype',\n                    cols: {\n                        lg: 3,\n                    }\n                },\n                {\n                    label: 'Type',\n                    field: 'type',\n                    cols: {\n                        lg: 3,\n                    }\n                },\n                {\n                    label: 'Date téléversement',\n                    field: 'created_at',\n                },\n                {\n                    label: 'Emplacement',\n                    field: 'path',\n                    cols: {\n                        lg: 12,\n                    }\n                },\n            ]\n        }\n    },\n    created() {\n        this.initData()\n    },\n    methods: {\n        initData() {\n            this.$store.dispatch('settings/updatePageLoading', true)\n        },\n        show(e) {\n            // console.log(e.activeDetailsRows[ 0 ].original_name);\n        },\n        destroy(e) {\n            return this.$swal.confirm_destroy().then((action) => {\n                if (action.isConfirmed) {\n                    return this.$api.delete('media/' + e.item.id).then((response) => {\n                        if (response.data.status) {\n                            this.refresh += 1\n                            this.$swal.toast_success(response.data.message)\n                        } else {\n                            this.$swal.alert_error(response.data.message)\n                        }\n                    }).catch(function (error) {\n                        console.log(error);\n                    })\n                }\n            })\n        }\n    }\n}\n</script>\n","import { render } from \"./index.vue?vue&type=template&id=19417ab6\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\skaalab\\\\task-management\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["layout","middleware","metaInfo","title","data","refresh","columns","label","field","isHtml","sortable","methods","showField","e","includes","extension","storage_link","icon","original_name","actions","delete","show","item","hasRole","apply","this","destroy","filters","users","cols","multiple","value","types","details","lg","created","initData","$store","dispatch","$swal","confirm_destroy","then","action","isConfirmed","$api","id","response","status","toast_success","message","alert_error","error","console","log","_createElementBlock","_createVNode","_component_ContentHeader","_component_ContentBody","_component_NLDatatable","$data","urlPrefix","onDetailsChanged","$options","onDataLoaded"],"sourceRoot":""}