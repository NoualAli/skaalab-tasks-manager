{"version":3,"file":"dist/js/9bfaaefbab995209.js","mappings":"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","sources":["webpack:///./resources/js/pages/admin/users/index.vue","webpack:///./resources/js/pages/admin/users/index.vue?9e6d"],"sourcesContent":["<template>\n    <div v-if=\"can('view_users')\">\n        <ContentHeader>\n            <template #actions>\n                <router-link v-if=\"can('create_user')\" :to=\"{ name: 'users-create' }\" class=\"btn btn-info has-icon\">\n                    <i class=\"las la-plus icon\"></i>\n                    Ajouter\n                </router-link>\n                <a href=\"/excel-export?export=users\" target=\"_blank\" class=\"btn btn-office-excel has-icon\">\n                    <i class=\"las la-file-excel icon\" />\n                    Exporter\n                </a>\n            </template>\n        </ContentHeader>\n        <ContentBody>\n            <NLDatatable :columns=\"columns\" :actions=\"actions\" :details=\"details\" title=\"Liste des utilisateurs\"\n                urlPrefix=\"users\" @edit=\"edit\" @delete=\"destroy\" :refresh=\"refresh\"\n                @dataLoaded=\"() => this.$store.dispatch('settings/updatePageLoading', false)\">\n                <template #actions-before=\"{ item }\">\n                    <a class=\"btn btn-office-excel\" :href=\"'/excel-export?export=users&id=' + item.id\" target=\"_blank\">\n                        <i class=\"las la-file-excel icon\" />\n                    </a>\n                </template>\n            </NLDatatable>\n        </ContentBody>\n    </div>\n</template>\n\n<script>\nimport { hasRole, user } from '../../../plugins/user'\nimport api from '../../../plugins/api'\nexport default {\n    layout: 'MainLayout',\n    middleware: [ 'auth' ],\n    created() {\n        this.$store.dispatch('settings/updatePageLoading', true)\n    },\n    data() {\n        return {\n            refresh: 1,\n            columns: [\n                {\n                    label: \"Nom d'utilisateur\",\n                    field: 'username',\n                    sortable: true\n                },\n                {\n                    label: 'Nom complet',\n                    field: 'full_name'\n                },\n                {\n                    label: 'Adresse email',\n                    field: 'email',\n                    sortable: true\n                },\n                {\n                    label: 'N° de téléphone',\n                    field: 'phone',\n                    sortable: true\n                },\n                {\n                    label: 'Rôle',\n                    field: 'role',\n                },\n                {\n                    label: 'Actif',\n                    field: 'is_active',\n                    isHtml: true,\n                    methods: {\n                        showField(item) {\n                            if (item.is_active) {\n                                return '<i class=\"las la-check-circle icon text-success\"></i>'\n                            }\n                            return '<i class=\"las la-times-circle icon text-danger\"></i>'\n                        }\n                    }\n                },\n                {\n                    label: 'Dernière connexion',\n                    field: 'last_login',\n                },\n                {\n                    label: 'Date de création',\n                    field: 'created_at',\n                    sortable: true,\n                },\n            ],\n            details: [\n                {\n                    label: \"Nom d'utilisateur\",\n                    field: 'username',\n                },\n                {\n                    label: 'Nom complet',\n                    field: 'full_name'\n                },\n                {\n                    label: 'Genre',\n                    field: 'gender_str'\n                },\n                {\n                    label: 'Adresse email',\n                    field: 'email',\n                },\n                {\n                    label: 'N° de téléphone',\n                    field: 'phone',\n                },\n                {\n                    label: 'Rôle',\n                    field: 'role_name'\n                },\n                {\n                    label: 'Dernière connexion',\n                    field: 'last_login_last_activity',\n                },\n                {\n                    label: 'Date de création',\n                    field: 'created_at',\n                },\n            ],\n            actions: {\n                edit: {\n                    show: (item) => {\n                        let condition = !this.isCurrent(item) && this.can('edit_user') && item?.role_code !== 'admin'\n                        return condition\n                    },\n                    apply: this.edit\n                },\n                delete: {\n                    show: (item) => {\n                        return !this.isCurrent(item) && this.can('delete_user') && item?.role_code !== 'admin' && hasRole([ 'admin' ]) && item.id !== user()?.id\n                    },\n                    apply: this.destroy\n                }\n            }\n        }\n    },\n    methods: {\n        /**\n         * Vérifie si la ligne correspond à l'utilisateur actuel\n         * @param {Object} item\n         */\n        isCurrent(item) {\n            return item?.id === user()?.id\n        },\n        /**\n         * Redirige vers la page d'edition\n         * @param {Object} e\n         */\n        edit(e) {\n            return this.$router.push({ name: 'users-edit', params: { user: e.item.id } })\n        },\n\n        /**\n         * Supprime la ressource\n         * @param {Object} e\n         */\n        destroy(e) {\n            return this.$swal.confirm_destroy().then((action) => {\n                if (action.isConfirmed) {\n                    return api.delete('users/' + e.item.id).then(response => {\n                        if (response.data.status) {\n                            this.refresh += 1\n                            return this.$swal.toast_success(response.data.message)\n                        } else {\n                            return this.$swal.toast_error(response.data.message)\n                        }\n                    })\n                }\n            }).catch(error => {\n                console.error(error)\n                this.$swal.alert_error()\n            })\n        },\n    }\n}\n</script>\n","import { render } from \"./index.vue?vue&type=template&id=079a4072\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\skaalab\\\\task-management\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","class","href","target","layout","middleware","created","this","$store","dispatch","data","refresh","columns","label","field","sortable","isHtml","methods","showField","item","is_active","details","actions","edit","show","isCurrent","can","role_code","apply","delete","hasRole","id","user","destroy","e","$router","push","name","params","$swal","confirm_destroy","then","action","isConfirmed","api","response","status","toast_success","message","toast_error","error","console","alert_error","_ctx","_createElementBlock","_createVNode","_component_ContentHeader","_createBlock","_component_router_link","to","_hoisted_2","_hoisted_3","_component_ContentBody","_component_NLDatatable","$data","title","urlPrefix","onEdit","$options","onDelete","onDataLoaded"],"sourceRoot":""}