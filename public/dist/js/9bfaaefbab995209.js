"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[458],{4458:(e,t,l)=>{l.r(t),l.d(t,{default:()=>f});var a=l(821),n={key:0},r=(0,a.createElementVNode)("i",{class:"las la-plus icon"},null,-1),i=(0,a.createElementVNode)("a",{href:"/excel-export?export=users",target:"_blank",class:"btn btn-office-excel has-icon"},[(0,a.createElementVNode)("i",{class:"las la-file-excel icon"}),(0,a.createTextVNode)(" Exporter ")],-1),o=["href"],s=[(0,a.createElementVNode)("i",{class:"las la-file-excel icon"},null,-1)];var c=l(7565),d=l(2661);const u={layout:"MainLayout",middleware:["auth"],created:function(){this.$store.dispatch("settings/updatePageLoading",!0)},data:function(){var e=this;return{refresh:1,columns:[{label:"Nom d'utilisateur",field:"username",sortable:!0},{label:"Nom complet",field:"full_name"},{label:"Adresse email",field:"email",sortable:!0},{label:"N° de téléphone",field:"phone",sortable:!0},{label:"Rôle",field:"role"},{label:"Actif",field:"is_active",isHtml:!0,methods:{showField:function(e){return e.is_active?'<i class="las la-check-circle icon text-success"></i>':'<i class="las la-times-circle icon text-danger"></i>'}}},{label:"Dernière connexion",field:"last_login"},{label:"Date de création",field:"created_at",sortable:!0}],details:[{label:"Nom d'utilisateur",field:"username"},{label:"Nom complet",field:"full_name"},{label:"Genre",field:"gender_str"},{label:"Adresse email",field:"email"},{label:"N° de téléphone",field:"phone"},{label:"Rôle",field:"role_name"},{label:"Dernière connexion",field:"last_login_last_activity"},{label:"Date de création",field:"created_at"}],actions:{edit:{show:function(t){return!e.isCurrent(t)&&e.can("edit_user")&&"admin"!==(null==t?void 0:t.role_code)},apply:this.edit},delete:{show:function(t){var l;return!e.isCurrent(t)&&e.can("delete_user")&&"admin"!==(null==t?void 0:t.role_code)&&(0,c.nu)(["admin"])&&t.id!==(null===(l=(0,c.EA)())||void 0===l?void 0:l.id)},apply:this.destroy}}}},methods:{isCurrent:function(e){var t;return(null==e?void 0:e.id)===(null===(t=(0,c.EA)())||void 0===t?void 0:t.id)},edit:function(e){return this.$router.push({name:"users-edit",params:{user:e.item.id}})},destroy:function(e){var t=this;return this.$swal.confirm_destroy().then((function(l){if(l.isConfirmed)return d.Z.delete("users/"+e.item.id).then((function(e){return e.data.status?(t.refresh+=1,t.$swal.toast_success(e.data.message)):t.$swal.toast_error(e.data.message)}))})).catch((function(e){console.error(e),t.$swal.alert_error()}))}}};const f=(0,l(3744).Z)(u,[["render",function(e,t,l,c,d,u){var f=this,m=(0,a.resolveComponent)("router-link"),h=(0,a.resolveComponent)("ContentHeader"),b=(0,a.resolveComponent)("NLDatatable"),p=(0,a.resolveComponent)("ContentBody");return e.can("view_users")?((0,a.openBlock)(),(0,a.createElementBlock)("div",n,[(0,a.createVNode)(h,null,{actions:(0,a.withCtx)((function(){return[e.can("create_user")?((0,a.openBlock)(),(0,a.createBlock)(m,{key:0,to:{name:"users-create"},class:"btn btn-info has-icon"},{default:(0,a.withCtx)((function(){return[r,(0,a.createTextVNode)(" Ajouter ")]})),_:1})):(0,a.createCommentVNode)("",!0),i]})),_:1}),(0,a.createVNode)(p,null,{default:(0,a.withCtx)((function(){return[(0,a.createVNode)(b,{columns:d.columns,actions:d.actions,details:d.details,title:"Liste des utilisateurs",urlPrefix:"users",onEdit:u.edit,onDelete:u.destroy,refresh:d.refresh,onDataLoaded:t[0]||(t[0]=function(){return f.$store.dispatch("settings/updatePageLoading",!1)})},{"actions-before":(0,a.withCtx)((function(e){var t=e.item;return[(0,a.createElementVNode)("a",{class:"btn btn-office-excel",href:"/excel-export?export=users&id="+t.id,target:"_blank"},s,8,o)]})),_:1},8,["columns","actions","details","onEdit","onDelete","refresh"])]})),_:1})])):(0,a.createCommentVNode)("",!0)}]])}}]);
//# sourceMappingURL=9bfaaefbab995209.js.map